I"<!--more-->
<p>Golangç®€å•é«˜æ•ˆï¼Œè€Œä¸”å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç¼–å†™webæœåŠ¡ï¼Œå› æ­¤åœ¨å¾®æœåŠ¡é¢†åŸŸéå¸¸å—æ¬¢è¿ã€‚è€Œæˆ‘ä¹Ÿéå¸¸å–œæ¬¢è¿™é—¨è¯­è¨€ï¼Œç¬¬ä¸€æ¬¡é€šè¿‡dockeréƒ¨ç½²æœåŠ¡å°±å¾ˆè‡ªç„¶çš„é€‰æ‹©äº†golangç¼–å†™çš„hello worldæœåŠ¡ã€‚</p>

<h3 id="1-ç¼–å†™golang--hello-worldæœåŠ¡">1. ç¼–å†™Golang  Hello WorldæœåŠ¡</h3>
<p>hello worldæ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ç†ŸçŸ¥çš„ç¨‹åºäº†ï¼Œè¿™é‡Œæ‰€è¯´çš„hello worldæœåŠ¡å…¶å®å°±æ˜¯ç”¨golangç¼–å†™httpæœåŠ¡ï¼Œæ¥å—è¯·æ±‚å¹¶åœ¨å“åº”ä¸­è¿”å›hello worldå­—ç¬¦ï¼Œä¸‹é¢æ˜¯ä»£ç ï¼š</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// httpHello.go</span>
<span class="k">package</span> <span class="n">main</span>
<span class="k">import</span> <span class="p">(</span>
	<span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span>  <span class="p">{</span>
	<span class="n">http</span><span class="o">.</span><span class="n">HandleFunc</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">res</span> <span class="n">http</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">,</span> <span class="n">req</span> <span class="o">*</span><span class="n">http</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">res</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s">"hello world!"</span><span class="p">)</span>
	<span class="p">})</span>
	<span class="n">http</span><span class="o">.</span><span class="n">ListenAndServe</span><span class="p">(</span><span class="s">":8080"</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ä½¿ç”¨<code class="highlighter-rouge">go run httpHello.go</code>è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œç„¶åç”¨æµè§ˆå™¨è®¿é—®localhost:8080å°±å¯ä»¥çœ‹åˆ°â€hello world!â€å­—ç¬¦ï¼Œè¿™æ ·å°±ç¼–å†™äº†ä¸€ä¸ªæä¸ºç®€å•çš„Hello WorldæœåŠ¡ã€‚</p>

<h3 id="2-ç¼–å†™dockerfile">2. ç¼–å†™Dockerfile</h3>
<p>æœ‰äº†Hello WorldæœåŠ¡çš„ç¨‹åºï¼Œå°±å¯ä»¥ä½¿ç”¨Dockerfileåˆ›å»ºé•œåƒæ¥è¿è¡Œäº†ã€‚é€šè¿‡Dockerfileå¯ä»¥éå¸¸ç®€å•çš„ä»ä¸€ä¸ªåŸºç¡€é•œåƒæ„å»ºæ‰€éœ€è¦çš„é•œåƒã€‚</p>

<ul>
  <li>åœ¨ç¨‹åºæ‰€åœ¨ç›®å½•åˆ›å»ºDockerfileæ–‡ä»¶</li>
  <li>é€šè¿‡Fromå®šä¹‰åŸºç¡€å®¹å™¨ï¼Œè¿è¡Œgoç¨‹åºçš„è¯éœ€è¦å¡«å†™From golang</li>
  <li>é€šè¿‡ADDå°†ç¨‹åºå¼•å…¥dockeré•œåƒï¼š<code class="highlighter-rouge">ADD httpHello.go /</code>è¡¨ç¤ºå°†httpHello.goå¼•å…¥åˆ°é•œåƒçš„æ ¹ç›®å½•ä¸‹</li>
  <li>é€šè¿‡EXPOSEæŒ‡å®šä»é•œåƒå¯åŠ¨çš„å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£ï¼šå› ä¸ºç¨‹åºç›‘å¬äº†8080ç«¯å£ï¼Œæ‰€ä»¥è®¾ç½®ä¸º<code class="highlighter-rouge">EXPOSE 8080</code></li>
  <li>æŒ‡å®šCMDæŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„åä»¤ï¼š<code class="highlighter-rouge">CMD ["go", "run", "/httpHello.go"]</code>è¡¨ç¤ºåœ¨å®¹å™¨å¯åŠ¨æ—¶å€¼æ‰§è¡Œ<code class="highlighter-rouge">go run /httpHello.go</code>æ¥è¿è¡Œå·²ç»åŒ…å«åœ¨æ ¹ç›®å½•ä¸­çš„ç¨‹åºã€‚
ä¸‹é¢æ˜¯å®Œæ•´çš„Dockerfileæ–‡ä»¶</li>
</ul>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> golang</span>
<span class="k">ADD</span><span class="s"> httpHello.go /</span>

<span class="k">EXPOSE</span><span class="s"> 8080</span>
<span class="k">CMD</span><span class="s"> ["go", "run", "/httpHello.go"]</span>
</code></pre></div></div>
<h3 id="3-æ„å»ºé•œåƒå¹¶ä»é•œåƒå¯åŠ¨dockerå®¹å™¨">3. æ„å»ºé•œåƒå¹¶ä»é•œåƒå¯åŠ¨dockerå®¹å™¨</h3>
<p>æœ‰äº†Dockerfileå°±å¯ä»¥æ„å»ºdockeré•œåƒäº†ï¼Œé€šè¿‡dockeré•œåƒåˆ™å¯ä»¥å¯åŠ¨dockerå®¹å™¨</p>

<h4 id="31-æ„å»ºé•œåƒ">3.1 æ„å»ºé•œåƒ</h4>
<p>å‘½ä»¤è¡Œè¿›å…¥åˆ°Dockerfileæ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œ<code class="highlighter-rouge">docker build .</code>æˆåŠŸåä¼šæœ‰å¦‚ä¸‹è¾“å‡ºï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sending build context to Docker daemon  3.072kB
Step 1/4 : FROM golang
latest: Pulling from library/golang
0bd44ff9c2cf: Pull <span class="nb">complete
</span>047670ddbd2a: Pull <span class="nb">complete
</span>ea7d5dc89438: Pull <span class="nb">complete
</span>ae7ad5906a75: Pull <span class="nb">complete
</span>15f6351ddb37: Pull <span class="nb">complete
</span>823ef4e8c9c9: Pull <span class="nb">complete
</span>dca1089cfb86: Pull <span class="nb">complete
</span>Digest: sha256:3b70f4747eb2c74ddf517b548c4ca8071a0c0b8b9c4ef5933e9a98372e03390f
Status: Downloaded newer image <span class="k">for </span>golang:latest
 <span class="nt">---</span><span class="o">&gt;</span> 4e611157870f
Step 2/4 : ADD httpHello.go /
 <span class="nt">---</span><span class="o">&gt;</span> e9cb475ff8bd
Step 3/4 : EXPOSE 8080
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>8bb9f8cd5af8
Removing intermediate container 8bb9f8cd5af8
 <span class="nt">---</span><span class="o">&gt;</span> 99f651e71bc2
Step 4/4 : CMD <span class="o">[</span><span class="s2">"go"</span>, <span class="s2">"run"</span>, <span class="s2">"/httpHello.go"</span><span class="o">]</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>dc525b84a581
Removing intermediate container dc525b84a581
 <span class="nt">---</span><span class="o">&gt;</span> 654b2f885150
Successfully built 654b2f885150
</code></pre></div></div>
<h4 id="32-å¯åŠ¨å®¹å™¨">3.2 å¯åŠ¨å®¹å™¨</h4>
<p>ä»ä¸Šä¸€æ­¥çš„è¾“å‡ºçš„æœ€åä¸€è¡Œä¸­æˆ‘ä»¬å¯ä»¥çš„å¾—åˆ°é•œåƒçš„idï¼Œå³â€654b2f885150â€ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡<code class="highlighter-rouge">docker run</code>ä»è¿™ä¸ªé•œåƒå¯åŠ¨å®¹å™¨äº†ã€‚ä¸ºäº†ä»å®¿ä¸»æœºè®¿é—®å®¹å™¨ç›‘å¬çš„çš„8080ï¼Œéœ€è¦å°†å®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„å®¹å™¨ä¸­ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šå‚æ•°-p 8080:8080å°†å®¹å™¨çš„8080æ˜ å°„åˆ°å®¿ä¸»æœºçš„8080ç«¯å£ã€‚è¿˜å¯ä»¥é€šè¿‡â€“nameå‚æ•°æŒ‡å®šå®¹å™¨çš„å”¯ä¸€åå­—ï¼Œæœ€åå†é€šè¿‡é•œåƒçš„idæŒ‡å®šé•œåƒï¼Œå°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨äº†ï¼Œå®Œæ•´å‘½ä»¤å¦‚ä¸‹ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p</span> 8080:8080 <span class="nt">--name</span> httpHello 654b2f885150
</code></pre></div></div>
:ET